UNAME=$(uname)
source $HOME/.commonfuncs

# let's set a proper PATH
#########################

# This is an attempt to use a fancy path generator
# like the one in .zshenv
new_path=""
expected_path=(
  "$HOME/bin"
  "$HOME/.cargo/bin"
  "$HOME/.local/bin"
  "$HOME/go/bin"
  /usr/local/bin
  /usr/local/sbin
  /usr/local/etc
  /usr/local/Cellar/python/2.7/bin
  /usr/local/share/python
  /usr/local/share/python3
  /usr/Programs/bin
  /sbin
  /bin
  /usr/bin
  /usr/sbin
  /usr/ucb
  /usr/bsd
  /usr/libexec
  /Developer/Tools
  /usr/local/opt/helm@2/bin
)

for element in "${expected_path[@]}"
do
  if [ -d $element ]; then
    if [ -z $new_path ]; then
      new_path=$element
    else
      new_path=$new_path:$element
    fi
  fi
done

PATH=$new_path:$PATH
export PATH


# Ensure the path is set up so that OS X can find the right python
export PATH=/usr/local/bin:/usr/local/sbin:$PATH

if [ -d "$HOME/google-cloud-sdk" ]; then
    source "$HOME/google-cloud-sdk/completion.zsh.inc"
    source "$HOME/google-cloud-sdk/path.zsh.inc"
fi

if [ -n "$DESKTOP_SESSION" ]; then
    eval $(gnome-keyring-daemon --start)
    export AWS_VAULT_BACKEND=secret-service
    export SSH_AUTH_SOCK
fi
